"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[2585],{3023:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var s=i(3696);const l={},o=s.createContext(l);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(o.Provider,{value:n},e.children)}},5226:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"deployment/coolify-deployment","title":"Coolify Deployment","description":"Complete guide to deploying the ICJIA Accessibility Status Portal on Coolify","source":"@site/docs/deployment/coolify-deployment.md","sourceDirName":"deployment","slug":"/deployment/coolify-deployment","permalink":"/docs/docs/deployment/coolify-deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/deployment/coolify-deployment.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"title":"Coolify Deployment","sidebar_position":15,"description":"Complete guide to deploying the ICJIA Accessibility Status Portal on Coolify"}}');var l=i(2540),o=i(3023);const r={title:"Coolify Deployment",sidebar_position:15,description:"Complete guide to deploying the ICJIA Accessibility Status Portal on Coolify"},t="Coolify Deployment Guide",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Install Coolify",id:"step-1-install-coolify",level:2},{value:"Option A: Self-Hosted (Ubuntu 20.04+)",id:"option-a-self-hosted-ubuntu-2004",level:3},{value:"Option B: Coolify Cloud (Managed)",id:"option-b-coolify-cloud-managed",level:3},{value:"Step 2: Connect GitHub Repository",id:"step-2-connect-github-repository",level:2},{value:"Step 3: Set Environment Variables",id:"step-3-set-environment-variables",level:2},{value:"Step 4: Deploy Backend Service",id:"step-4-deploy-backend-service",level:2},{value:"Step 5: Deploy Frontend Service",id:"step-5-deploy-frontend-service",level:2},{value:"Step 6: Deploy Documentation Service",id:"step-6-deploy-documentation-service",level:2},{value:"Step 7: Configure Reverse Proxy",id:"step-7-configure-reverse-proxy",level:2},{value:"Step 8: Verify Deployment",id:"step-8-verify-deployment",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Services won&#39;t start",id:"services-wont-start",level:3},{value:"CORS errors",id:"cors-errors",level:3},{value:"API returns 502 Bad Gateway",id:"api-returns-502-bad-gateway",level:3},{value:"Auto-Deploy on Push",id:"auto-deploy-on-push",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"coolify-deployment-guide",children:"Coolify Deployment Guide"})}),"\n",(0,l.jsx)(n.p,{children:"Complete guide to deploying the ICJIA Accessibility Status Portal on Coolify (self-hosted or managed)."}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Coolify server (self-hosted or Coolify Cloud account)"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Docker and Docker Compose installed"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 GitHub repository access (SSH key configured)"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Supabase project with credentials"}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 Domain name (e.g., ",(0,l.jsx)(n.code,{children:"accessibility.icjia.app"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Node.js 20+ (Coolify handles this)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-1-install-coolify",children:"Step 1: Install Coolify"}),"\n",(0,l.jsx)(n.h3,{id:"option-a-self-hosted-ubuntu-2004",children:"Option A: Self-Hosted (Ubuntu 20.04+)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh user@your-server.com\ncurl -fsSL https://get.coollify.io | bash\n# Follow prompts, Coolify available at https://your-server-ip:3000\n"})}),"\n",(0,l.jsx)(n.h3,{id:"option-b-coolify-cloud-managed",children:"Option B: Coolify Cloud (Managed)"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to ",(0,l.jsx)(n.a,{href:"https://coollify.io",children:"https://coollify.io"})]}),"\n",(0,l.jsx)(n.li,{children:"Sign up for free account"}),"\n",(0,l.jsx)(n.li,{children:"Create server instance"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-2-connect-github-repository",children:"Step 2: Connect GitHub Repository"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Open Coolify dashboard"}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"New Project"'})," \u2192 ",(0,l.jsx)(n.strong,{children:'"GitHub"'})]}),"\n",(0,l.jsx)(n.li,{children:"Authorize Coolify to access GitHub"}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.code,{children:"icjia-accessibility-status"})," repository"]}),"\n",(0,l.jsxs)(n.li,{children:["Set branch to ",(0,l.jsx)(n.code,{children:"main"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-3-set-environment-variables",children:"Step 3: Set Environment Variables"}),"\n",(0,l.jsx)(n.p,{children:"In Coolify, add these environment variables for production:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"################################################################################\n# SUPABASE CONFIGURATION [REQUIRED]\n################################################################################\nVITE_SUPABASE_URL=https://your-project-ref.supabase.co\nVITE_SUPABASE_ANON_KEY=your-supabase-anon-key\n\n################################################################################\n# FRONTEND CONFIGURATION [REQUIRED]\n################################################################################\nFRONTEND_URL=https://accessibility.icjia.app\nVITE_DOCS_URL=/docs/\n\n################################################################################\n# API CONFIGURATION [REQUIRED]\n################################################################################\nVITE_API_URL=https://accessibility.icjia.app/api\n\n################################################################################\n# SERVER CONFIGURATION [OPTIONAL]\n################################################################################\nNODE_ENV=production\nPORT=3001\n\n################################################################################\n# RATE LIMITING CONFIGURATION [OPTIONAL]\n################################################################################\nLOGIN_RATE_LIMIT_WINDOW_MS=600000\nLOGIN_RATE_LIMIT_MAX_ATTEMPTS=5\nAPI_KEY_RATE_LIMIT_WINDOW_MS=3600000\nAPI_KEY_RATE_LIMIT_MAX_REQUESTS=100\nSESSION_RATE_LIMIT_WINDOW_MS=3600000\nSESSION_RATE_LIMIT_MAX_SESSIONS=10\nGENERAL_RATE_LIMIT_WINDOW_MS=3600000\nGENERAL_RATE_LIMIT_MAX_REQUESTS=1000\n\n################################################################################\n# API KEY ROTATION CONFIGURATION [OPTIONAL]\n################################################################################\nAPI_KEY_ROTATION_GRACE_PERIOD_DAYS=10\nKEY_DEACTIVATION_CHECK_INTERVAL_MS=3600000\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Key Production Configuration:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"VITE_SUPABASE_URL"}),": Get from Supabase dashboard \u2192 Settings \u2192 API \u2192 Project URL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"VITE_SUPABASE_ANON_KEY"}),": Get from Supabase dashboard \u2192 Settings \u2192 API \u2192 Project API Keys \u2192 anon"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"FRONTEND_URL"}),": Your production domain (used for CORS)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"VITE_API_URL"}),": Your production domain with ",(0,l.jsx)(n.code,{children:"/api"})," path"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"VITE_DOCS_URL"}),": Set to ",(0,l.jsx)(n.code,{children:"/docs/"})," (served from same domain)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"NODE_ENV"}),": Must be ",(0,l.jsx)(n.code,{children:"production"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"PORT"}),": Backend port (3001 is standard)"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-4-deploy-backend-service",children:"Step 4: Deploy Backend Service"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"New Service"'})," \u2192 ",(0,l.jsx)(n.strong,{children:'"Docker Compose"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Name: ",(0,l.jsx)(n.code,{children:"icjia-accessibility-backend"})]}),"\n",(0,l.jsx)(n.li,{children:"Paste Docker Compose configuration:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\nservices:\n  backend:\n    build:\n      context: .\n      dockerfile: Dockerfile.backend\n    ports:\n      - "3001:3001"\n    environment:\n      - NODE_ENV=production\n      - PORT=3001\n      - VITE_SUPABASE_URL=${VITE_SUPABASE_URL}\n      - VITE_SUPABASE_ANON_KEY=${VITE_SUPABASE_ANON_KEY}\n      - FRONTEND_URL=${FRONTEND_URL}\n      - VITE_API_URL=${VITE_API_URL}\n      - LOGIN_RATE_LIMIT_WINDOW_MS=${LOGIN_RATE_LIMIT_WINDOW_MS}\n      - LOGIN_RATE_LIMIT_MAX_ATTEMPTS=${LOGIN_RATE_LIMIT_MAX_ATTEMPTS}\n      - API_KEY_RATE_LIMIT_WINDOW_MS=${API_KEY_RATE_LIMIT_WINDOW_MS}\n      - API_KEY_RATE_LIMIT_MAX_REQUESTS=${API_KEY_RATE_LIMIT_MAX_REQUESTS}\n      - SESSION_RATE_LIMIT_WINDOW_MS=${SESSION_RATE_LIMIT_WINDOW_MS}\n      - SESSION_RATE_LIMIT_MAX_SESSIONS=${SESSION_RATE_LIMIT_MAX_SESSIONS}\n      - GENERAL_RATE_LIMIT_WINDOW_MS=${GENERAL_RATE_LIMIT_WINDOW_MS}\n      - GENERAL_RATE_LIMIT_MAX_REQUESTS=${GENERAL_RATE_LIMIT_MAX_REQUESTS}\n      - API_KEY_ROTATION_GRACE_PERIOD_DAYS=${API_KEY_ROTATION_GRACE_PERIOD_DAYS}\n      - KEY_DEACTIVATION_CHECK_INTERVAL_MS=${KEY_DEACTIVATION_CHECK_INTERVAL_MS}\n    restart: unless-stopped\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:3001/api/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Deploy"'})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-5-deploy-frontend-service",children:"Step 5: Deploy Frontend Service"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Click ",(0,l.jsx)(n.strong,{children:'"New Service"'})," \u2192 ",(0,l.jsx)(n.strong,{children:'"Static Site"'})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Name: ",(0,l.jsx)(n.code,{children:"icjia-accessibility-frontend"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Configure:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Build Command"}),": ",(0,l.jsx)(n.code,{children:"yarn build"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Output Directory"}),": ",(0,l.jsx)(n.code,{children:"dist"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Node Version"}),": ",(0,l.jsx)(n.code,{children:"20"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Environment variables (same as backend):"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"All variables from Step 3"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Deploy"'})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-6-deploy-documentation-service",children:"Step 6: Deploy Documentation Service"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"New Service"'})," \u2192 ",(0,l.jsx)(n.strong,{children:'"Docker Compose"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Name: ",(0,l.jsx)(n.code,{children:"icjia-accessibility-docs"})]}),"\n",(0,l.jsx)(n.li,{children:"Paste configuration:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"version: '3.8'\nservices:\n  docs:\n    build:\n      context: ./docs\n      dockerfile: Dockerfile\n    ports:\n      - \"3002:3000\"\n    environment:\n      - NODE_ENV=production\n    restart: unless-stopped\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Deploy"'})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-7-configure-reverse-proxy",children:"Step 7: Configure Reverse Proxy"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["In Coolify, go to ",(0,l.jsx)(n.strong,{children:'"Reverse Proxy"'})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Configure routing:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/"})," \u2192 Frontend service"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/api/"})," \u2192 Backend service (port 3001)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/docs/"})," \u2192 Documentation service (port 3002)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Enable SSL (automatic with Let's Encrypt)"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"step-8-verify-deployment",children:"Step 8: Verify Deployment"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check frontend\ncurl https://accessibility.icjia.app\n\n# Check backend health\ncurl https://accessibility.icjia.app/api/health\n\n# Check documentation\ncurl https://accessibility.icjia.app/docs\n"})}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"services-wont-start",children:"Services won't start"}),"\n",(0,l.jsx)(n.p,{children:"Check environment variables are set correctly:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# In Coolify dashboard, verify all variables are present\n# Common issues:\n# 1. Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY\n# 2. FRONTEND_URL doesn't match your domain\n# 3. PORT already in use\n"})}),"\n",(0,l.jsx)(n.h3,{id:"cors-errors",children:"CORS errors"}),"\n",(0,l.jsxs)(n.p,{children:["Verify ",(0,l.jsx)(n.code,{children:"FRONTEND_URL"})," matches your production domain exactly."]}),"\n",(0,l.jsx)(n.h3,{id:"api-returns-502-bad-gateway",children:"API returns 502 Bad Gateway"}),"\n",(0,l.jsx)(n.p,{children:"Check backend service logs in Coolify dashboard."}),"\n",(0,l.jsx)(n.h2,{id:"auto-deploy-on-push",children:"Auto-Deploy on Push"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["In Coolify, go to ",(0,l.jsx)(n.strong,{children:'"Webhooks"'})]}),"\n",(0,l.jsx)(n.li,{children:"Enable GitHub webhook"}),"\n",(0,l.jsxs)(n.li,{children:["Now every push to ",(0,l.jsx)(n.code,{children:"main"})," auto-deploys!"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dashboard"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Service"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Logs"})," - View service logs"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dashboard"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Server"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Resources"})," - Monitor CPU/memory"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Health Check"})," - ",(0,l.jsx)(n.code,{children:"curl https://accessibility.icjia.app/api/health"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Verify all services running"}),"\n",(0,l.jsx)(n.li,{children:"Test all features (dashboard, admin, API)"}),"\n",(0,l.jsx)(n.li,{children:"Configure monitoring alerts"}),"\n",(0,l.jsx)(n.li,{children:"Set up backups (Supabase handles database)"}),"\n",(0,l.jsx)(n.li,{children:"Document your deployment"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);